<%args>
	$round => undef
</%args>
<%init>

    use REST::Client;

	unless (
		$round->event->type eq "debate"
		&& ( $round->event->setting("auto_docshare"))
	) {
		return "Not today, Satan";
	}

	my $share_url = $Tab::indexcards_url.'/tab/'.$tourn.'/round/'.$round.'/makeShareRooms';
	my $auth_header = encode_base64($Tab::indexcards_user.":".$Tab::indexcards_key);

    my $client = REST::Client->new(
        host => $Tab::indexcards_url
    );

	$client->POST(
		$share_url,
		$post,
		{
			'Authorization' => "Basic $auth_header",
			'Accept'        => 'application/json',
			'Content-Type'  => 'application/json'
		}
	);

	return "I DID IT";

</%init>
